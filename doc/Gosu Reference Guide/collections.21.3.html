<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Basic Hash Maps</title>
    <link rel="StyleSheet" href="css/collections.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="collections.21.1.html#1452058">Collections</a> : Basic Hash Maps</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="1452058">Basic Hash Maps</a></h3>
      <div class="B_-_Body"><a name="1452080">Maps in Gosu inherit from the Java class </a><span class="cv_-_computer_voice">java.util.HashMap</span>.</div>
      <h4 class="H2_-_Heading_2"><a name="1452165">Creating a Hash Map</a></h4>
      <div class="B_-_Body"><a name="1452346">To create an empty map, specify the type of objects it contains in brackets using generics&nbsp;notation. For example, define a </a><span class="cv_-_computer_voice">HashMap</span> that maps a <span class="cv_-_computer_voice">String</span> object to another <span class="cv_-_computer_voice">String</span> object:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1452359">var emptyMap = new HashMap&lt;String, String&gt;()</a></PRE>
      <div class="B_-_Body"><a name="1452384">In many cases you might want to initialize (load) it with data. Gosu has special features that allow a natural syntax for initializing maps similar to initializing arrays and lists.</a></div>
      <div class="B_-_Body"><a name="1452391">For example, the following code creates a new </a><span class="cv_-_computer_voice">HashMap</span> where <span class="cv_-_computer_voice">"a"</span> and <span class="cv_-_computer_voice">"c"</span> are keys, whose values are <span class="cv_-_computer_voice">"b"</span> and <span class="cv_-_computer_voice">"d"</span> respectively</div>
      <div class="CS_-_Code_Single_Line"><a name="1452115">var strMap = new HashMap&lt;String, String&gt;(){"a" -&gt; "b", "c" -&gt; "d"}</a></div>
      <div class="B_-_Body"><a name="1452117">That is effectively shorthand for the following code:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1452118">var strs = new HashMap&lt;String, String&gt;()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1452119">strs.put("a", "b")</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1452120">strs.put("c", "d")</a></PRE>
      <div class="B_-_Body"><a name="1452121">This syntax makes it easy to declare static final data structures of this type within Gosu, and with easier-to-read code than the equivalent code would be in Java. </a></div>
      <h6 class="HS_-_Head_Sub"><a name="1487903">See also</a></h6>
      <div class="B_-_Body"><a href="javascript:WWHClickedPopup('gosu', 'generics.20.1.html#1455314', '');" title="Gosu Generics" name="1487923">“Gosu Generics”</a></div>
      <h4 class="H2_-_Heading_2"><a name="1452408">Getting and Setting Values in a Hash Map</a></h4>
      <div class="B_-_Body"><a name="1452409">The following code sets and gets </a><span class="cv_-_computer_voice">String</span> values from a <span class="cv_-_computer_voice">HashMap</span>:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1452410">var strs = new HashMap&lt;String, String&gt;(){"a" -&gt; "b", "c" -&gt; "d"}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1452411">strs.put("e", "f")</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1452412">var valueForE = strs.get("e")</a></PRE>
      <div class="B_-_Body"><a name="1452413">You can write this instead in the more natural index syntax using Gosu shortcuts:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1452414">var strs = new HashMap&lt;String, String&gt;(){"a" -&gt; "b", "c" -&gt; "d"}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1452415">strs["e"] = "f"</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1452416">var valueForE = strs["e"]</a></PRE>
      <h4 class="H2_-_Heading_2"><a name="1452539">Creating a Hash Map with Type Inference </a></h4>
      <div class="B_-_Body"><a name="1466053">Because of Gosu’s intelligent type inference features, you can optionally use a more concise initializer syntax if Gosu can infer the type of the map.</a></div>
      <div class="B_-_Body"><a name="1466066">For example, suppose you create a custom function </a><span class="cv_-_computer_voice">printMap</span> defined as:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1466067">function printMap( strMap : Map&lt;String, String&gt; ) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1466068">   for( key in strMap.keys ) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1466069">     print( "key : " + key + ", value : " + strMap[key] )</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1466070">   {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1466071"> }</a></PRE>
      <div class="B_-_Body"><a name="1466060">Because the type of the map is explicit in the function, callers of this function can use an initializer expression without specifying the type name or even the keyword </a><span class="cv_-_computer_voice">new</span>. This does not mean that the list is untyped. The list is statically typed but it is optional to declare explicitly because it is redundant.</div>
      <div class="B_-_Body"><a name="1466087">For example, you could initialize a </a><span class="cv_-_computer_voice">java.util.Map</span> and call this function with verbose code like:</div>
      <PRE class="CL_-_Code_Last_Line"><a name="1466088">printMap( new Map&lt;String, String&gt;() {"a" -&gt; "b", "c" -&gt; "d"} )</a></PRE>
      <div class="B_-_Body"><a name="1466089">Instead, simply type the following code and use type inference for concise code:</a></div>
      <PRE class="CL_-_Code_Last_Line"><a name="1466090">printMap( {"a" -&gt; "b", "c" -&gt; "d"} )</a></PRE>
      <div class="B_-_Body"><a name="1466171">Gosu permits this last example as valid and typesafe. Gosu infers the type of the </a><span class="cv_-_computer_voice">List</span> to be the least upper bound of the components of the list. In the simple case above, the type of the variable <span class="cv_-_computer_voice">x</span> at compile time is <span class="cv_-_computer_voice">List&lt;String&gt;</span>. If you pass different types of objects, Gosu finds the most specific type that includes all of the items in the list. </div>
      <div class="B_-_Body"><a name="1466172">If the types implement interfaces, Gosu attempts to preserve commonality of interface support in the list type. This ensures your list acts as expected with APIs that rely on support for the interface. In some cases, the resulting type is a compound&nbsp;type, which combines a class and one or more interfaces into a single type. For example, the following code initializes an </a><span class="cv_-_computer_voice">int</span> and a <span class="cv_-_computer_voice">double</span>:</div>
      <div class="CS_-_Code_Single_Line"><a name="1466174">var s  = {"hello" -&gt; 0, "there" -&gt; 3.4} </a></div>
      <div class="B_-_Body"><a name="1466175">The resulting type of </a><span class="cv_-_computer_voice">s</span> is <span class="cv_-_computer_voice">HashMap&lt;String, java.lang.Comparable &amp; java.lang.Number&gt;</span>. This means that it is a map with two generic parameters:</div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt; margin-bottom: 2.0pt; margin-top: 2.0pt; vertical-align: baseline">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap; color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none"><span class="cv_-_computer_voice"><a name="1466201">String</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI2_-_Bullet_Item_002c_Level_2_outer" style="margin-left: 67pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI2_-_Bullet_Item_002c_Level_2_inner"><a name="1466211">The compound type of the class </a><span class="cv_-_computer_voice">Number</span> and the interface <span class="cv_-_computer_voice">Comparable</span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="1466176">The </a><span class="cv_-_computer_voice">Number</span> class does not implement the interface <span class="cv_-_computer_voice">Comparable</span>. If it did, then the type of <span class="cv_-_computer_voice">s</span> would simply be <span class="cv_-_computer_voice">Map&lt;String, java.lang.Number&gt;</span>. However, since it does not implement that interface, but both <span class="cv_-_computer_voice">int</span> and <span class="cv_-_computer_voice">double</span> implement that interface, Gosu assigns the compound type that includes the interfaces that they have in common.</div>
      <h4 class="H2_-_Heading_2"><a name="1452216">Special Enhancements on Maps</a></h4>
      <div class="B_-_Body"><a name="1452218">Just as most methods for lists are defined as part of Java’s class </a><span class="cv_-_computer_voice">java.util.ArrayList</span>, most of the behavior of maps in Gosu inherit behavior from <span class="cv_-_computer_voice">java.util.Map</span>. However, Gosu provides additional enhancements to extend maps with additional features, some of which use Gosu blocks.</div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1452221">Map Properties for Keys and Values</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1452222">Enhancements to the </a><span class="cv_-_computer_voice">Map</span> class add two new read-only properties: </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1452224">keys</a></span> – Calculates and returns the set of keys in the <span class="cv_-_computer_voice">Map</span>. This is simply a wrapper for the keySet() method.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><span class="cv_-_computer_voice"><a name="1452226">values</a></span> – Returns the values of the <span class="cv_-_computer_voice">Map</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="H3_-_Heading_3_outer" style="margin-left: 36pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <h5 class="H3_-_Heading_3_inner" style="width: 18pt; white-space: nowrap"></h5>
            </td>
            <td width="100%">
              <h5 class="H3_-_Heading_3_inner"><a name="1452227">Each Key and Value</a></h5>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1452229">Enhancements to the </a><span class="cv_-_computer_voice">Map</span> class add the <span class="cv_-_computer_voice">eachKeyAndValue</span> method, which takes a block that has two arguments: of the key type and one of the value type. This method calls this block with each key/value pair in the <span class="cv_-_computer_voice">Map</span>, allowing for a more natural iteration over the Map.</div>
      <div class="B_-_Body"><a name="1452230">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1452231">var strMap = new HashMap&lt;String, String&gt;(){"a" -&gt; "b", "c" -&gt; "d"}</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1452232">strMap.eachKeyAndValue( \ key, value -&gt; print("key : " + key + ", value : " + value ) )</a></PRE>
      <h4 class="H2_-_Heading_2"><a name="1501650">Wrapped Maps with Default Values</a></h4>
      <div class="B_-_Body"><a name="1501666">Gosu provides a class called </a><span class="cv_-_computer_voice">gw.util.AutoMap</span> that implements the Java interface <span class="cv_-_computer_voice">java.util.Map</span>. This is an alternative to using the standard <span class="cv_-_computer_voice">java.util.HashMap</span> class. </div>
      <div class="B_-_Body"><a name="1501963">The </a><span class="cv_-_computer_voice">AutoMap</span> class wraps a <span class="cv_-_computer_voice">java.Util.Map</span> and provides a default value for the map if the key is not present. When you create an <span class="cv_-_computer_voice">AutoMap</span> object, you pass a Gosu block into the constructor. If some calling code calls <span class="cv_-_computer_voice">get</span> on the map and its value is <span class="cv_-_computer_voice">null</span>, Gosu runs a mapping block that you provide. Gosu takes the return value from the block, stores it in the map for that key, then returns the value to the original caller. All other methods delegate directly to the wrapped map.</div>
      <div class="B_-_Body"><a name="1502268">The most simple constructor takes only one argument, which is a Gosu block that provides a default value. The block takes one argument (the key) and returns the default value to use. If you use this constructor, Gosu creates a new instance of </a><span class="cv_-_computer_voice">java.util.HashMap</span> as its wrapped map.</div>
      <div class="B_-_Body"><a name="1502485">Another constructor takes a map (any object whose class implements </a><span class="cv_-_computer_voice">java.util.Map</span>) as the first argument and the Gosu block as the second argument. Use this alternate constructor if you already have an existing map that you want to wrap rather than create a new map.</div>
      <div class="B_-_Body"><a name="1503180">For example:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1503203">var origMap = { 1 -&gt; "apple", 4 -&gt; "orange"}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1503277">var newMap = origMap.toAutoMap( \ k -&gt; "I want ${k} blueberries")</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1503205">for (i in 1..5) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1503206">  print(newMap[i])</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1503207">}</a></PRE>
      <div class="B_-_Body"><a name="1503307">This code prints:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1503324">apple</a></PRE>
      <PRE class="CF_-_Code_First_Line"><a name="1503325">I want 2 blueberries</a></PRE>
      <PRE class="CF_-_Code_First_Line"><a name="1503326">I want 3 blueberries</a></PRE>
      <PRE class="CF_-_Code_First_Line"><a name="1503327">orange</a></PRE>
      <PRE class="CF_-_Code_First_Line"><a name="1503308">I want 5 blueberries</a></PRE>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>