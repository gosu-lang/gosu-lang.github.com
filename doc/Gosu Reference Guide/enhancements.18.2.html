<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Using Enhancements</title>
    <link rel="StyleSheet" href="css/enhancements.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
    <!-- THE FOLLOWING IS A GUIDEWIRE STYLE DEFINITION FOR THE LINK TO THIS FEATURE -->
    <link rel="StyleSheet" href="css/css-guidewire-extra.css" type="text/css" media="all" />
    <!-- THE FOLLOWING IS A GUIDEWIRE GSCRIPT FUNCTION FOR THE LINK TO THIS FEATURE -->
    <script type="text/javascript">
function guidewire_selectall()
{
var text_val=eval("document.linktothisurlform.urlfield");
text_val.focus();
text_val.select();
}
</script>
  </head>
  <body onLoad="WWHUpdate();" onUnload="WWHUnload();" onKeyDown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onKeyPress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onKeyUp="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <!-- THE FOLLOWING IS A GUIDEWIRE DIV FOR THE 'LINK TO THIS' FEATURE -->
    <div id="linkToThisPage" class="popup" style="display: none;">
      <div class="popupTitle">Link Directly to This Page 
           <a href="#" onclick="var thePopup = getElementById('linkToThisPage');thePopup.style.display='none';return false;"><img class="popupClosebox" src="wwhelp/wwhimpl/common/images/close.gif" /></a></div>
      <div style="padding:6px;">
        <div class="popupText" id="linkToThisPageBookmark">An error has occurred if you see this messsage.</div>
        <form name="linktothisurlform" method="post" action="" style="width:275px;margin:0px">
          <input type="text" class="popupURLText" id="linkToThisPageURL" name="urlfield" rows="1" cols="55" onClick="guidewire_selectall();" onFocus="guidewire_selectall();"></input>
        </form>
      </div>
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <span>Gosu Reference Guide</span> : 
    <span class="WebWorks_Breadcrumbs" style="text-align: left;"><a class="WebWorks_Breadcrumb_Link" href="enhancements.18.1.html#1434595">Enhancements</a> : Using Enhancements</span></div>
    <hr align="left" />
    <blockquote>
      <h3 class="H1_-_Heading_1"><a name="1434595">Using Enhancements</a></h3>
      <div class="B_-_Body"><a name="1439011">Gosu </a><span class="e_-_emphasis">enhancements</span> allow you to augment classes and other types with additional concrete methods and properties. The most valuable use of this feature is to define additional utility methods on a Java class or interface that cannot be directly modified. This is most useful if a class’s source code is unavailable, or a given class is <span class="e_-_emphasis">final</span> (cannot be subclassed). Enhancements can be used with interfaces as well as classes, which means you can add useful methods to interfaces. </div>
      <div class="B_-_Body"><a name="1439013">Enhancing a class or other type is different from subclassing: enhancing a class makes the new methods and properties available to </a><span class="s_-_strong">all</span> instances of that class, not merely subclass instances. For example, if you add an enhancement method to the <span class="cv_-_computer_voice">String</span> class, all <span class="cv_-_computer_voice">String</span> instances in Gosu automatically have the additional method.</div>
      <div class="B_-_Body"><a name="1438473">You can also use enhancements to overcome the language shortcomings of Java or other languages defining a class or interface. For example, Java-based classes and interfaces can be used from Gosu, but they do not natively allow use of blocks, which are anonymous functions defined in-line within another function. (See </a><a href="javascript:WWHClickedPopup('gosu', 'blocks.19.1.html#1445150', '');" title="Gosu Blocks">“Gosu Blocks”</a>.) Gosu includes many built-in enhancements to commonly-used Java classes in its products so that any Gosu code can use them. </div>
      <div class="B_-_Body"><a name="1438477">For example, Gosu extends the Java class </a><span class="cv_-_computer_voice">java.util.ArrayList</span> so you can use concise Gosu syntax to sort, find, and map members of a list. These list enhancements add additional methods to Java lists that take Gosu blocks as parameters. The original Java class does not support blocks because the Java language does not support blocks. However, these enhancements add utilities without direct modifications to the class. Gosu makes these additional methods automatically and universally available for all places where Gosu code uses <span class="cv_-_computer_voice">java.util.ArrayList</span>.</div>
      <div class="B_-_Body"><a name="1447699">You can also enhance an interface. This does </a><span class="s_-_strong">not</span> mean an enhancement can add new methods to the interface itself. The enhancement does not add new requirements for classes to implement the interface. Instead, enhancing an interface means that all objects whose class implements the interface now has new methods and properties. For example, if you enhance the <span class="cv_-_computer_voice">java.util.Collection</span> interface with a new method, all collection types suddenly have your newly-added method.</div>
      <div class="B_-_Body"><a name="1436885">This does not go into detail about the built-in enhancements to collections. For reference documentation, see </a><a href="javascript:WWHClickedPopup('gosu', 'collections.21.1.html#1448766', '');" title="Collections">“Collections”</a>. If you have not yet learned about Gosu <span class="e_-_emphasis">blocks</span>, you may want to first review <a href="javascript:WWHClickedPopup('gosu', 'blocks.19.1.html#1445150', '');" title="Gosu Blocks">“Gosu Blocks”</a>.</div>
      <h4 class="H2_-_Heading_2"><a name="1439437">Syntax for Using Enhancements</a></h4>
      <div class="B_-_Body"><a name="1439438">There is no special syntax for using an already-defined enhancement. The new methods and properties are automatically available within the Gosu editor for all Gosu contexts. </a></div>
      <div class="B_-_Body"><a name="1439439">For example, suppose there is an enhancement on the </a><span class="cv_-_computer_voice">String</span> type for an additional method called <span class="cv_-_computer_voice">calculateHash</span>. Use typical method syntax to call the method with any <span class="cv_-_computer_voice">String</span> object accessible from Gosu:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1439440">var s1 = "a string"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1439441">var r1 = s1.calculateHash()</a></PRE>
      <div class="B_-_Body"><a name="1439442">You could even use the method on a value you provide at compile time:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="1439443">"a string".calculateHash()</a></PRE>
      <div class="B_-_Body"><a name="1439444">Similarly, if the enhancement adds a property called </a><span class="cv_-_computer_voice">MyProperty</span> to the <span class="cv_-_computer_voice">String</span> type, you could use code such as:</div>
      <PRE class="CM_-_Code_Middle_Line"><a name="1439445">var p = "a string".MyProperty</a></PRE>
      <div class="B_-_Body"><a name="1439446">The new methods and properties all appear in the list of methods that appears if you type a period (.) character in the Gosu editor. For example, if typing “</a><span class="cv_-_computer_voice">s1.calculateHash()</span>”, after you type “<span class="cv_-_computer_voice">s1.</span>” the list that appears displays the <span class="cv_-_computer_voice">calculateHash</span> method as a choice.</div>
      <h4 class="H2_-_Heading_2"><a name="1439200">Creating a New Enhancement</a></h4>
      <div class="B_-_Body"><a name="1447568">To create a new enhancement, put the file in your Gosu class file hierarchy in the package that represents the enhancement. It does not need to match the package of the enhanced type.</a></div>
      <h4 class="H2_-_Heading_2"><a name="1439430">Syntax for Defining Enhancements</a></h4>
      <div class="B_-_Body"><a name="1439431">Although using enhanced properties and methods is straightforward, a special syntax is necessary for defining new enhancements. Defining a new Gosu enhancement looks similar to defining a new Gosu class, with some minor differences in their basic definition.</a></div>
      <div class="B_-_Body"><a name="1437230">Differences between classes and enhancements include</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1437063">Use the keyword </a><span class="cv_-_computer_voice">enhancement</span> instead of <span class="cv_-_computer_voice">class</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1438393">To define what to enhance, use the syntax: “</a><span class="cv_-_computer_voice">:</span>&nbsp;<span class="ps_-_parameter_in_code_snippets">TYPETOEXTEND</span>” instead of “<span class="cv_-_computer_voice">extends&nbsp;</span><span class="ps_-_parameter_in_code_snippets">CLASSTOEXTEND</span>”</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1438394">If you must reference methods on the enhanced class/type, use the symbol </a><span class="cv_-_computer_voice">this</span> to see the enhanced class/type. For example, to call the enhanced object’s <span class="cv_-_computer_voice">myAction</span> method, use the syntax <span class="cv_-_computer_voice">this.myAction()</span>. In contrast, never use the keyword <span class="cv_-_computer_voice">super</span> in an enhancement. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="N_-_Note">
        <span class="n_-_note">Note: </span><a name="1439536">Enhancements technically are defined in terms of the </a><span class="e_-_emphasis">external interface</span> of the enhanced type. The keyword <span class="cv_-_computer_voice">super</span> implies a superclass rather than an interface, so it is inappropriate for enhancements.</div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1437376">Enhancements cannot save state information by allocating new variables or properties on the enhanced type.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1438369">Enhancement methods can use properties already defined on the enhanced object or call other enhanced methods. </a></div>
      <div class="B_-_Body"><a name="1439460">You can add new </a><span class="e_-_emphasis">properties</span> as necessary and access the properties on the class/type within Gosu. However, that does not actually allow you to save state information for the enhancement unless you can do so using variables or properties that already exist on the enhanced type. See later in this section for more on this topic.</div>
      <div class="B_-_Body"><a name="1437283">For example, the following enhancement adds one standard method to the basic </a><span class="cv_-_computer_voice">String</span> class and one property:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1437284">package example</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1437285">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1437286">enhancement StringTestEnhancement : java.lang.String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1437287">&nbsp;&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438495">&nbsp;&nbsp;public function myMethod(): String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1437288">&nbsp;&nbsp;&nbsp;&nbsp;return "Secret message!"</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1437290">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438766">   </a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438767">&nbsp;&nbsp;public property get myProperty() : String {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438768">&nbsp;&nbsp;&nbsp;&nbsp;return "length : " + this.length()</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1437294">&nbsp;&nbsp;}</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1437984">}</a></PRE>
      <div class="B_-_Body"><a name="1438535">Note the use of the syntax “</a><span style="font-family: &quot;Lucida Sans Typewriter&quot;; font-size: 7.0pt">property get</span>” for the method defined as a property.</div>
      <div class="B_-_Body"><a name="1437427">With this example, use code like the following to get values:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1438148">// get an enhancement property:</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438149">print("This is my string".myProperty)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438031">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438515">// get an enhancement method:</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438037">print("This is my string".myMethod())</a></PRE>
      <div class="B_-_Body"><a name="1438163">These lines outputs the following:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1438167">"length: 17"</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1438172">"Secret message!"</a></PRE>
      <div class="B_-_Body"><a name="1438032">Enhanced methods can call other methods internally, as demonstrated with the </a><span class="cv_-_computer_voice">getPrettyLengthString</span> method, which calls the built-in <span class="cv_-_computer_voice">String</span> method <span class="cv_-_computer_voice">length()</span>.</div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1439399">Enhancements can create new methods but cannot override existing methods.</a></div>
      <h6 class="HS_-_Head_Sub"><a name="1439400">Setting Properties in Enhancements</a></h6>
      <div class="B_-_Body"><a name="1439401">Within enhancement methods, your code can set other values as appropriate such as an existing class instance variable. You can also set properties with the “</a><span class="cv_-_computer_voice">property set </span><span class="ps_-_parameter_in_code_snippets">PROPERTYNAME</span><span class="cv_-_computer_voice">()</span>” syntax. For example, this enhancement creates a new settable property that appends an item to a list:</div>
      <PRE class="CF_-_Code_First_Line"><a name="1438889">package example</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438890">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438891">enhancement ListTestEnhancement&lt;T&gt; : java.util.ArrayList&lt;T&gt;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1439129">{</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1439130">  public property set LastItem(item : T) {</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1439131">    this.add(item)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438895">  }</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1438896">}</a></PRE>
      <div class="B_-_Body"><a name="1438949">Test this code in the Gosu Tester with this code:</a></div>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438958">uses java.util.ArrayList</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438959">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438960">var strlist = new ArrayList&lt;String&gt;() {"abc", "def", "ghi", "jkl"}</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438961">&nbsp;</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438962">print(strlist)</a></PRE>
      <PRE class="CM_-_Code_Middle_Line"><a name="1438963">strlist.LastItem = "hello"</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1438950">print(strlist)</a></PRE>
      <div class="B_-_Body"><a name="1438973">This code outputs:</a></div>
      <PRE class="CF_-_Code_First_Line"><a name="1438979">[abc, def, ghi, jkl]</a></PRE>
      <PRE class="CL_-_Code_Last_Line"><a name="1439142">[abc, def, ghi, jkl, hello]</a></PRE>
      <div class="B_-_Body"><a name="1439143">You can add new properties and add property set functions to set those properties. However, in contrast to a class, enhancements cannot define </a><span class="s_-_strong">new</span> variables on the type to store instance data for your enhancement. This limits most types of state management if you cannot directly change the source code for the enhanced type to add more variables to the enhanced type. Enhancements cannot add new variables because different types have dramatically different property storage techniques, such as a persistent database storage, Gosu memory storage, or file-based storage. Enhancements cannot transparently mirror these storage mechanisms.</div>
      <div class="B_-_Body"><a name="1439369">Also, although enhancements can add properties, enhancements cannot override existing properties.</a></div>
      <div class="NI_-_Note_Important">
        <span class="n_-_note">IMPORTANT   </span><a name="1439370">Enhancements can add new properties by adding new dynamic property get and set functions to the type. However, enhancements cannot override property get or set functions. Also, enhancements cannot create new native variables on the object that would require additional data storage with the original object. Enhancements cannot override methods either.</a></div>
      <h4 class="H2_-_Heading_2"><a name="1437458">Enhancement Naming and Package Conventions</a></h4>
      <div class="B_-_Body"><a name="1439249">The name of your enhancement must follow the following naming convention of the enhanced type name, then an optional functional description, followed by word </a><span class="cv_-_computer_voice">Enhancement</span>. In other words, the format is:</div>
      <div class="CS_-_Code_Single_Line"><span class="pc_-_parameter_in_code"><a name="1437468">[EnhancedTypeName][OptionalFunctionalDescripton]</a></span>Enhancement</div>
      <div class="B_-_Body"><a name="1437469">For example, to enhance the </a><span class="cv_-_computer_voice">Report</span> class, you could call it simply:</div>
      <div class="CS_-_Code_Single_Line"><a name="1438591">ReportEnhancement</a></div>
      <div class="B_-_Body"><a name="1438592">If the enhancement added methods related to claim financials, you might emphasize the enhancement’s functional purpose by naming the enhancement:</a></div>
      <div class="CS_-_Code_Single_Line"><a name="1438574">ReportFinancialsEnhancement</a></div>
      <h6 class="HS_-_Head_Sub"><a name="1438623">Enhancement Packages</a></h6>
      <div class="B_-_Body"><a name="1439351">Use your own company package to hierarchically group your own code and separate it from built-in types, in almost all cases. For example, you could define your enhancement with the fully-qualified name </a><span class="cv_-_computer_voice">com.mycompany.ReportEnhancement</span>. Even if you are enhancing a built-in type, if at all possible use your own package for the enhancement class itself.</div>
      <div class="B_-_Body"><a name="1439274">In only extremely rare cases, you might need to enhance a built-in type and you need to use a </a><span class="cv_-_computer_voice">protected</span> property or method. If so, you might need to define your enhancement in a subpackage of the enhanced type. See <a href="javascript:WWHClickedPopup('gosu', 'classes.13.5.html#2445687', '');" title="Modifiers">“Modifiers”</a> for more information about the <span class="cv_-_computer_voice">protected</span> keyword. However, to avoid namespace conflicts with built-in types, avoid this approach if possible.</div>
      <h4 class="H2_-_Heading_2"><a name="1438604">Enhancements on Arrays</a></h4>
      <div class="B_-_Body"><a name="1447408">To specify the enhanced type for an enhancement on an array type:</a></div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1447449">For regular types, use standard array syntax, such as </a><span class="cv_-_computer_voice">String[].</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BI_-_Bullet_Item_outer" style="margin-left: 57pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="BI_-_Bullet_Item_inner" style="width: 15pt; white-space: nowrap">
                <span class="bu_-_bullet">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="BI_-_Bullet_Item_inner"><a name="1447461">For generic types, use the syntax </a><span class="cv_-_computer_voice">T[]</span>, which effectively means all arrays.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="B_-_Body"><a name="1447384">&nbsp;</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>